<!doctype html>
<html>
<head>
<title>Sankey Chart</title>

<!-- BlueWave Dependencies -->
<script src="https://www.javaxt.com/downloads/javaxt-webcontrols/javaxt.js"></script>
<script src="https://d3js.org/d3.v6.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/d3-sankey@0.12.3/dist/d3-sankey.min.js"></script>

<!-- BlueWave Includes -->
<script src="../src/SankeyChart.js"></script>
<script src="../src/Utils.js"></script>


<!-- Demo-Specific Includes -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.3/codemirror.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.3/mode/javascript/javascript.min.js"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.3/codemirror.min.css" rel="stylesheet" />
<link href="style.css" rel="stylesheet" type="text/css" />

</head>
<body>
<h1>Sankey Demos</h1>


<div class="demo-container">

  <h2>Sankey Chart</h2>
  <p>Basic sankey using supply chain data</p>
  <div class="demo-row">
    <div id="demo1" class="chart-window" style="width:800px;height:400px;"></div>
    <script>

  //Create sankey chart using "demo1" div
    var div = document.getElementById("demo1");
    var sankey = new bluewave.charts.SankeyChart(div, {});

    var data = {

      "nodes": [
        {"name": "level_1", "group": "barrier level"},
        {"name": "Tiawan", "group": "country of origin"},
        {"name": "Other", "group": "country of origin"},
        {"name": "dist4", "group": "distributor"},
        {"name": "dist6", "group": "distributor"},
        {"name": "level_3", "group": "barrier level"},
        {"name": "dist2", "group": "distributor"},
        {"name": "level_2", "group": "barrier level"},
        {"name": "dist5", "group": "distributor"},
        {"name": "dist1", "group": "distributor"},
        {"name": "NB", "group": "barrier level"},
        {"name": "Mexico", "group": "country of origin"},
        {"name": "dist3", "group": "distributor"},
        {"name": "USA", "group": "country of origin"},
        {"name": "Thailand", "group": "country of origin"},
        {"name": "China", "group": "country of origin"}
      ],
      "links": [
        {"source": "USA", "target": "dist1", "value": 8763906},
        {"source": "USA", "target": "dist2", "value": 3719222},
        {"source": "USA", "target": "dist3", "value": 8923602},
        {"source": "China", "target": "dist2", "value": 3719222},
        {"source": "China", "target": "dist4", "value": 25679996},
        {"source": "China", "target": "dist6", "value": 9422778},
        {"source": "Mexico", "target": "dist1", "value": 8763906},
        {"source": "Mexico", "target": "dist3", "value": 8923602},
        {"source": "Mexico", "target": "dist5", "value": 16087756},
        {"source": "Thailand", "target": "dist3", "value": 8923602},
        {"source": "Tiawan", "target": "dist3", "value": 8923602},
        {"source": "Tiawan", "target": "dist5", "value": 16087756},
        {"source": "Other", "target": "dist3", "value": 8923602},
        {"source": "Other", "target": "dist5", "value": 16087756},
        {"source": "dist1", "target": "level_1", "value": 4109332},
        {"source": "dist1", "target": "level_3", "value": 1072000},
        {"source": "dist1", "target": "level_1", "value": 8058481},
        {"source": "dist1", "target": "level_3", "value": 4288000},
        {"source": "dist2", "target": "level_1", "value": 1868999},
        {"source": "dist2", "target": "level_3", "value": 623700},
        {"source": "dist2", "target": "level_1", "value": 3634447},
        {"source": "dist2", "target": "level_3", "value": 1311299},
        {"source": "dist3", "target": "level_1", "value": 6333332},
        {"source": "dist3", "target": "level_2", "value": 5573332},
        {"source": "dist3", "target": "level_3", "value": 1919000},
        {"source": "dist3", "target": "level_1", "value": 14413791},
        {"source": "dist3", "target": "level_2", "value": 13208274},
        {"source": "dist3", "target": "level_3", "value": 3170285},
        {"source": "dist4", "target": "level_1", "value": 3281333},
        {"source": "dist4", "target": "level_2", "value": 2746333},
        {"source": "dist4", "target": "level_3", "value": 813200},
        {"source": "dist4", "target": "level_1", "value": 7172688},
        {"source": "dist4", "target": "level_2", "value": 8199642},
        {"source": "dist4", "target": "level_3", "value": 3466800},
        {"source": "dist5", "target": "level_1", "value": 6611999},
        {"source": "dist5", "target": "level_2", "value": 5756999},
        {"source": "dist5", "target": "level_3", "value": 1898100},
        {"source": "dist5", "target": "NB", "value": 2000699},
        {"source": "dist5", "target": "level_1", "value": 9308688},
        {"source": "dist5", "target": "level_2", "value": 15470584},
        {"source": "dist5", "target": "level_3", "value": 3109757},
        {"source": "dist5", "target": "NB", "value": 4106442},
        {"source": "dist6", "target": "level_1", "value": 839999},
        {"source": "dist6", "target": "level_2", "value": 979999},
        {"source": "dist6", "target": "level_3", "value": 366000},
        {"source": "dist6", "target": "NB", "value": 279000},
        {"source": "dist6", "target": "level_1", "value": 3401378},
        {"source": "dist6", "target": "level_2", "value": 1640689},
        {"source": "dist6", "target": "level_3", "value": 866142},
        {"source": "dist6", "target": "NB", "value": 1049571}
      ]

    };

    var chartConfig = {
        showTooltip: true
    };


    sankey.update(chartConfig, data);

    </script>
  </div>




</div>

<script>
window.onload = function() {

  //The following script creates code blocks for each demo
    var scripts = document.getElementsByTagName("script");
    for (var i=0; i<scripts.length-1; i++){
        var script = scripts[i];
        if (script.src) continue;

        var div = document.createElement("div");
        script.parentNode.appendChild(div);

        CodeMirror(div, {
            mode: "javascript",
            lineNumbers: true,
            readOnly: true,
            value: "  " + script.innerText.trim()
        });
    }
};
</script>

</body>
</html>